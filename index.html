<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
</head>

<style type="text/css">
	#board{
		width: 366px;
		height: 366px;
		border: 3px solid black;
		background-color: lightblue;
		margin-left: auto;
		margin-right: auto;
		margin-top: 10%;
		display: flex;
		flex-wrap: wrap;
	}
	img {
		width:120px;
		height:120px;
		padding-left:1px;
		padding-right:1px;
	}

</style>

<body>
	<div id="board"></div>
</body>
	<script>
		const board = document.getElementById("board");

		let imgArr = ["1", "3", "2", "5", "7", "9", "4", "6", "8"];
		let rows = 3;
		let cols = 3;

		function getFileName(src) {
			let res = src.split("/").at(-1).split(".");
			return res.at(-2);
		}

		function swap(node1, node2) {
			//swap image
			let tmp = node1.src;
			node1.src = node2.src;
			node2.src = tmp;
		}

		function moveTile() {
			let nodeId = this.id.split("-");
			let nodeRow = nodeId[0];
			let nodeCol = nodeId[1];

			//calculate adjacent tile coordinate id
			let topNodeId = (parseInt(nodeRow) - 1) + "-" + nodeCol;
			let btmNodeId = (parseInt(nodeRow) + 1) + "-" + nodeCol;
			let leftNodeId = nodeRow + "-" + (parseInt(nodeCol) - 1);
			let rightNodeId = nodeRow + "-" + (parseInt(nodeCol) + 1);

			let topNode = document.getElementById(topNodeId);
			let btmNode = document.getElementById(btmNodeId);
			let leftNode = document.getElementById(leftNodeId);
			let rightNode = document.getElementById(rightNodeId);
			
			if(topNode != null && getFileName(topNode.src) == "3") {
				swap(this, topNode);
			}
			else if(btmNode != null && getFileName(btmNode.src) == "3") {
				swap(this, btmNode);
			}
			else if(leftNode != null && getFileName(leftNode.src) == "3") {
				swap(this, leftNode);
			}
			else if(rightNode != null && getFileName(rightNode.src) == "3") {
				swap(this, rightNode);
			}
			else {
				console.log("empty tile not found");
			}

		}

		var arrIdx = 0;
		for(let i = 1; i <= rows; i++) {
			for(let j = 1; j <= cols; j++) {
				var tile = document.createElement('img');	
				//set row and column as coordinate in id with hyphen as seperator
				tile.id = i + "-" + j;
				tile.src = "img/" + imgArr[arrIdx] + ".jpg";
				tile.addEventListener('click', moveTile);
				board.appendChild(tile);
				arrIdx++;
			}
		}
	</script>
</html>